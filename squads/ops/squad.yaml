# OPS Squad - Orchestration & Operations
# Travel Tech Digital AIOS
# Version: 1.1.0

name: ops
version: "1.1.0"
description: "Squad de orquestração responsável pela coordenação global, roteamento de trabalho, visão sistêmica, gestão operacional e integração com ClickUp Command Center."

aios:
  minVersion: "2.1.0"
  type: squad
  domain: operations

config:
  slashPrefix: "ops"
  entry_point: "workflows/status.yaml"

lead:
  agent: "ops-lead"
  role: "AIOS Master"

agents:
  - id: "ops-lead"
    file: "agents/ops-lead.md"
    name: "Orion"
    role: "Visão sistêmica, prioridades, conflitos"
  - id: "ops-manager"
    file: "agents/ops-manager.md"
    name: "Maxwell"
    role: "Traduz pedidos em OS, roteia para squads"
  - id: "clawdbot"
    file: "agents/clawdbot.md"
    name: "Clawdbot"
    role: "Executor determinístico, sync, logs"

components:
  agents:
    - "ops-lead.md"
    - "ops-manager.md"
    - "clawdbot.md"
  tasks:
    - "create-os.md"
    - "route-request.md"
    - "assign-agent.md"
    - "track-os-status.md"
    - "validate-os.md"
    - "monitor-sla.md"
    - "escalate-issue.md"
    - "calculate-daily-cost.md"
    - "sync-to-notion.md"
    - "generate-status-report.md"
    - "archive-completed.md"
    - "balance-workload.md"
  workflows:
    - "status.yaml"
    - "new-task.yaml"
    - "cost-report.yaml"
    - "sync-notion.yaml"
    - "daily-standup.yaml"
    - "weekly-review.yaml"
  templates:
    - "os-template.yaml"
    - "daily-report-tmpl.md"
    - "weekly-summary-tmpl.md"
    - "escalation-tmpl.md"
    - "cost-report-tmpl.md"
  checklists:
    - "os-validation.md"
    - "os-handoff.md"
    - "daily-close.md"
    - "weekly-review.md"
  data:
    - "squad-registry.yaml"
    - "sla-definitions.yaml"
    - "escalation-matrix.yaml"
    - "os-status-definitions.yaml"
    - "command-center-data.json"
  scripts:
    - "clickup-sync.mjs"
    - "command-center.mjs"
    - "dashboard.mjs"

dependencies:
  requires: []
  provides:
    - "orchestration"
    - "routing"
    - "cost-tracking"
    - "sync"
    - "clickup-integration"
    - "sla-monitoring"

integrations:
  - name: "clickup"
    type: "api"
    required: true
    description: "Command Center - task CRUD, cost tracking, goals"
  - name: "notion"
    type: "api"
    required: false
    description: "Legacy sync (optional)"
  - name: "local-filesystem"
    type: "tool"
    required: true

tags:
  - "core"
  - "orchestration"
  - "meta"
  - "command-center"

commands:
  # Core Operations
  - name: "status"
    workflow: "workflows/status.yaml"
    description: "Mostra status geral do sistema"
    visibility: "full"
  - name: "new-task"
    workflow: "workflows/new-task.yaml"
    description: "Cria nova OS a partir de pedido"
    visibility: "full"
  - name: "cost-report"
    workflow: "workflows/cost-report.yaml"
    description: "Relatório de custos"
    visibility: "full"

  # Sync & Integration
  - name: "sync-notion"
    workflow: "workflows/sync-notion.yaml"
    description: "Sincroniza YAML com Notion"
    visibility: "quick"

  # Recurring Workflows
  - name: "daily-standup"
    workflow: "workflows/daily-standup.yaml"
    description: "Daily digest: OS status, blockers, costs"
    visibility: "full"
    trigger: "scheduled"
  - name: "weekly-review"
    workflow: "workflows/weekly-review.yaml"
    description: "Weekly review: metrics, retrospective, planning"
    visibility: "full"
    trigger: "scheduled"

  # ClickUp Command Center (via scripts)
  - name: "clickup-create"
    script: "scripts/clickup-sync.mjs create"
    description: "Criar task no ClickUp"
    visibility: "quick"
  - name: "clickup-start"
    script: "scripts/clickup-sync.mjs start"
    description: "Marcar task como in progress"
    visibility: "quick"
  - name: "clickup-done"
    script: "scripts/clickup-sync.mjs done"
    description: "Marcar task como concluída"
    visibility: "quick"
  - name: "track-cost"
    script: "scripts/command-center.mjs track"
    description: "Registrar custo/tokens de uma task"
    visibility: "quick"
  - name: "sync-dashboard"
    script: "scripts/dashboard.mjs sync"
    description: "Sincronizar dashboard e goals"
    visibility: "quick"

quality:
  min_checklist_coverage: 90
  require_qa_gate: true
  require_documentation: true

# Budget Governance
governance:
  budget:
    daily_limit: 20        # EUR
    daily_alert: 15        # EUR - trigger notification
    monthly_limit: 468     # EUR
    per_task_limit: 10     # EUR - requires approval above
  escalation:
    cost_threshold: 80     # % of daily budget
    conflict_sla: 24       # hours to resolve
    governance_violation: "immediate"
