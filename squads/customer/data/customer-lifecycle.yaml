# Customer Lifecycle Reference
# Squad: customer
# Version: 1.0.0

# =============================================================================
# CUSTOMER LIFECYCLE STAGES
# =============================================================================

lifecycle_stages:

  purchase:
    name: "Purchase"
    description: "Customer has signed up/purchased"
    entry_event: "payment_complete OR trial_start"
    exit_event: "first_login"
    goals:
      - "Send welcome communication"
      - "Set expectations"
      - "Provide access"
    metrics:
      - "time_to_first_login"
    target_duration: "< 1 hour"

  onboarding:
    name: "Onboarding"
    description: "Customer is setting up and learning"
    entry_event: "first_login"
    exit_event: "activation_complete"
    goals:
      - "Guide to first value"
      - "Complete setup"
      - "Build initial habits"
    metrics:
      - "activation_rate"
      - "time_to_value"
      - "onboarding_completion"
    target_duration: "< 7 days"

  adoption:
    name: "Adoption"
    description: "Customer is actively using product"
    entry_event: "activation_complete"
    exit_event: "habit_formed"
    goals:
      - "Deepen feature usage"
      - "Expand to team"
      - "Build dependency"
    metrics:
      - "feature_adoption_rate"
      - "active_users"
      - "session_frequency"
    target_duration: "30-90 days"

  expansion:
    name: "Expansion"
    description: "Customer is growing usage/spend"
    entry_event: "habit_formed"
    exit_event: "advocacy_ready"
    goals:
      - "Identify upsell opportunities"
      - "Increase usage"
      - "Add users/features"
    metrics:
      - "expansion_revenue"
      - "seats_added"
      - "feature_upgrades"
    target_duration: "Ongoing"

  advocacy:
    name: "Advocacy"
    description: "Customer promotes the product"
    entry_event: "high_nps AND active_usage"
    exit_event: "N/A (ongoing)"
    goals:
      - "Capture testimonials"
      - "Generate referrals"
      - "Build case studies"
    metrics:
      - "nps_score"
      - "referrals_generated"
      - "reviews_posted"
    target_duration: "Ongoing"

# =============================================================================
# ACTIVATION DEFINITIONS
# =============================================================================

activation:

  definition: "User has experienced core value and formed initial habit"

  criteria:
    travel_tech_hotel:
      must_complete:
        - "property_setup"
        - "first_workflow_run"
        - "return_visit"
      time_window: "7 days from signup"
      minimum_sessions: 3

  activation_events:
    - event: "property_configured"
      weight: 30
      description: "Hotel property fully set up"

    - event: "first_workflow_complete"
      weight: 40
      description: "Ran first AI workflow successfully"

    - event: "second_session_with_action"
      weight: 30
      description: "Returned and took meaningful action"

  activation_score:
    activated: ">= 70 points"
    partial: "40-69 points"
    not_activated: "< 40 points"

# =============================================================================
# CHURN DEFINITIONS
# =============================================================================

churn:

  contractual_churn:
    definition: "Customer does not renew contract"
    measurement: "At contract end date"
    types:
      - voluntary: "Customer chooses not to renew"
      - involuntary: "Payment failure, business closure"

  behavioral_churn:
    definition: "Customer stops using product"
    measurement: "No login for 30+ days"
    early_warning: "No login for 14 days"

  revenue_churn:
    gross:
      definition: "Lost MRR from downgrades + cancellations"
      formula: "(Churned MRR + Downgrade MRR) / Start MRR"
    net:
      definition: "Lost MRR minus expansion"
      formula: "(Churned + Downgrade - Expansion) / Start MRR"

  churn_reasons:
    - code: "COMPETITOR"
      description: "Switched to competitor"
      actionable: true

    - code: "PRICE"
      description: "Too expensive"
      actionable: true

    - code: "NO_NEED"
      description: "No longer needs product"
      actionable: false

    - code: "MISSING_FEATURE"
      description: "Needed feature not available"
      actionable: true

    - code: "BAD_EXPERIENCE"
      description: "Poor support/product experience"
      actionable: true

    - code: "CHAMPION_LEFT"
      description: "Key user left company"
      actionable: false

    - code: "BUSINESS_CLOSED"
      description: "Company went out of business"
      actionable: false

    - code: "PAYMENT_FAILED"
      description: "Could not collect payment"
      actionable: true

# =============================================================================
# CUSTOMER HEALTH SCORING
# =============================================================================

health_score:

  components:
    usage:
      weight: 30
      metrics:
        login_frequency:
          daily: 10
          weekly: 7
          monthly: 4
          inactive: 0
        feature_depth:
          high: 10
          medium: 6
          low: 2
        active_users:
          ">75%": 10
          "50-75%": 6
          "<50%": 2

    engagement:
      weight: 25
      metrics:
        session_duration:
          high: 10
          medium: 6
          low: 2
        actions_per_session:
          high: 10
          medium: 6
          low: 2
        return_rate:
          high: 5
          medium: 3
          low: 1

    relationship:
      weight: 25
      metrics:
        nps:
          "9-10": 10
          "7-8": 6
          "0-6": 2
        support_sentiment:
          positive: 10
          neutral: 5
          negative: 0
        csm_engagement:
          regular: 5
          occasional: 3
          none: 0

    business:
      weight: 20
      metrics:
        revenue_trend:
          growing: 10
          stable: 6
          declining: 2
        payment_history:
          on_time: 5
          late: 2
          failed: 0
        expansion_signals:
          strong: 5
          some: 3
          none: 0

  thresholds:
    healthy:
      range: "80-100"
      action: "Expansion focus"
    at_risk:
      range: "50-79"
      action: "Proactive outreach"
    critical:
      range: "0-49"
      action: "Immediate intervention"

# =============================================================================
# CUSTOMER SEGMENTS
# =============================================================================

segments:

  by_tier:
    enterprise:
      criteria: "ARR > $50,000"
      service_level: "Dedicated CSM"
      health_check: "Monthly"
      qbr: "Quarterly"

    business:
      criteria: "ARR $10,000-$50,000"
      service_level: "Pooled CSM"
      health_check: "Quarterly"
      qbr: "Semi-annual"

    starter:
      criteria: "ARR < $10,000"
      service_level: "Tech touch"
      health_check: "Automated"
      qbr: "N/A"

  by_lifecycle:
    new:
      criteria: "< 90 days"
      focus: "Activation"
      touchpoints: "High"

    established:
      criteria: "90 days - 1 year"
      focus: "Adoption"
      touchpoints: "Medium"

    mature:
      criteria: "> 1 year"
      focus: "Expansion"
      touchpoints: "Strategic"

# =============================================================================
# KEY METRICS & BENCHMARKS
# =============================================================================

metrics:

  activation:
    metric: "activation_rate"
    definition: "Users who complete activation / Total signups"
    benchmark_b2b: "40-60%"
    target: "50%"

  time_to_value:
    metric: "time_to_first_value"
    definition: "Time from signup to first meaningful action"
    benchmark: "< 5 minutes"
    target: "< 3 minutes"

  retention:
    day_7:
      benchmark_b2b: "60%"
      target: "65%"
    day_30:
      benchmark_b2b: "40%"
      target: "45%"

  nps:
    metric: "net_promoter_score"
    definition: "Promoters - Detractors"
    benchmark_saas: "30-50"
    target: "50+"

  churn:
    monthly:
      benchmark_b2b_smb: "3-5%"
      target: "< 3%"
    annual:
      benchmark_b2b_smb: "30-50%"
      target: "< 30%"

  expansion:
    nrr:
      metric: "net_revenue_retention"
      benchmark_b2b: "100-110%"
      target: "> 110%"
    expansion_rate:
      metric: "expansion_revenue / start_revenue"
      benchmark: "> 20%"
      target: "25%"

# =============================================================================
# TOUCHPOINT CADENCE
# =============================================================================

touchpoint_cadence:

  enterprise:
    onboarding_call: "Day 1"
    kickoff_meeting: "Week 1"
    check_in_1: "Day 14"
    check_in_2: "Day 30"
    qbr: "Day 90"
    renewal_prep: "60 days before"

  business:
    welcome_email: "Day 0"
    check_in_email: "Day 7"
    adoption_call: "Day 30"
    health_check: "Day 90"
    renewal_email: "30 days before"

  starter:
    welcome_email: "Day 0"
    tips_email: "Day 3"
    check_in_email: "Day 14"
    nps_survey: "Day 30"
    renewal_email: "14 days before"
